<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js"></script>

    <style>
      /* Стили для заглушки */
      #overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: #130558af;
        z-index: 1000;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }

      #playAudioButton {
        padding: 16px 24px;
        font-size: 24px;
        font-weight: 500;
        cursor: pointer;
        background-color: #ffffff;
        color: #3b3398;
        border: none;
        border-radius: 800px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      #star {
        position: absolute;
        top: 5%;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 80px;
      }

      #sign {
        position: absolute;
        bottom: -70px;
        left: 50%;
        transform: translateX(-50%);
        width: 124px;
        height: 186px;
      }

      #text {
        padding-bottom: 24px;
        text-align: center;
        width: 280px;
        font-size: 20px;
        color: #ffffff;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
    </style>
  </head>
  <body>
    <div id="overlay">
      <object id="star" data="assets/star.svg" type="image/svg+xml"></object>
      <div id="text">Turn on the sound on your device and press continue</div>
      <button id="playAudioButton">Continue</button>
      <object id="sign" data="assets/sign.svg" type="image/svg+xml"></object>
    </div>

    <a-scene
      id="scene"
      mindar-image="imageTargetSrc: assets/targets.mind; filterMinCF: 0.0005; filterBeta: 0.005; warmupTolerance: 5; missTolerance: 15; maxTrack: 6"
      color-space="sRGB"
      renderer="colorManagement: true"
      vr-mode-ui="enabled: false"
      device-orientation-permission-ui="enabled: false"
    >
      <a-assets>
        <img id="coral" src="assets/01_coral.png" />
        <img id="cypress_cone" src="assets/02_cypress_cone.png" />
        <img id="hamsa" src="assets/03_hamsa.png" />
        <img id="oak_leaf" src="assets/04_oak_leaf.png" />
        <img id="palo_santo" src="assets/05_palo_santo.png" />
        <img id="quartz" src="assets/06_quartz.png" />
        <img id="seashell" src="assets/07_seashell.png" />
        <img id="swallow" src="assets/08_swallow.png" />
        <img id="quartz2" src="assets/06_quartz.png" />
        <img id="rose" src="assets/09_rose.png" />
      </a-assets>

      <!-- Камера -->
      <a-camera position="0 0 0" look-controls="enabled: true"></a-camera>

      <!-- Цель 0 с параллаксом -->
      <a-entity mindar-image-target="targetIndex: 0">
        <!-- Маска: изображение с альфа-каналом -->
        <a-image
          src="#coral"
          width="1.5"
          height="2"
          position="0 0 0.01"
          transparent="true"
        ></a-image>

        <!-- Фон: то же изображение внутри sky -->
        <a-sky
          src="#coral"
          radius="5"
          theta-length="90"
          position="0 0 -1"
        ></a-sky>
      </a-entity>

      <!-- Цель 1 с параллаксом -->
      <a-entity mindar-image-target="targetIndex: 1">
        <!-- Маска: изображение с альфа-каналом -->
        <a-image
          src="#cypress_cone"
          width="1.5"
          height="2"
          position="0 0 0.01"
          transparent="true"
        ></a-image>

        <!-- Фон: то же изображение внутри sky -->
        <a-sky
          src="#cypress_cone"
          radius="5"
          theta-length="90"
          position="0 0 -1"
        ></a-sky>
      </a-entity>

      <!-- Цель 2 с параллаксом -->
      <a-entity mindar-image-target="targetIndex: 2">
        <!-- Маска: изображение с альфа-каналом -->
        <a-image
          src="#hamsa"
          width="1.5"
          height="2"
          position="0 0 0.01"
          transparent="true"
        ></a-image>

        <!-- Фон: то же изображение внутри sky -->
        <a-sky
          src="#hamsa"
          radius="5"
          theta-length="90"
          position="0 0 -1"
        ></a-sky>
      </a-entity>

      <!-- Цель 3 с параллаксом -->
      <a-entity mindar-image-target="targetIndex: 3">
        <!-- Маска: изображение с альфа-каналом -->
        <a-image
          src="#oak_leaf"
          width="1.5"
          height="2"
          position="0 0 0.01"
          transparent="true"
        ></a-image>

        <!-- Фон: то же изображение внутри sky -->
        <a-sky
          src="#oak_leaf"
          radius="5"
          theta-length="90"
          position="0 0 -1"
        ></a-sky>
      </a-entity>

      <!-- Цель 4 с параллаксом -->
      <a-entity mindar-image-target="targetIndex: 4">
        <!-- Маска: изображение с альфа-каналом -->
        <a-image
          src="#palo_santo"
          width="1.5"
          height="2"
          position="0 0 0.01"
          transparent="true"
        ></a-image>

        <!-- Фон: то же изображение внутри sky -->
        <a-sky
          src="#palo_santo"
          radius="5"
          theta-length="90"
          position="0 0 -1"
        ></a-sky>
      </a-entity>

      <!-- Цель 5 с параллаксом -->
      <a-entity mindar-image-target="targetIndex: 5">
        <!-- Маска: изображение с альфа-каналом -->
        <a-image
          src="#quartz"
          width="1.5"
          height="2"
          position="0 0 0.01"
          transparent="true"
        ></a-image>

        <!-- Фон: то же изображение внутри sky -->
        <a-sky
          src="#quartz"
          radius="5"
          theta-length="90"
          position="0 0 -1"
        ></a-sky>
      </a-entity>

      <!-- Цель 6 с параллаксом -->
      <a-entity mindar-image-target="targetIndex: 6">
        <!-- Маска: изображение с альфа-каналом -->
        <a-image
          src="#seashell"
          width="1.5"
          height="2"
          position="0 0 0.01"
          transparent="true"
        ></a-image>

        <!-- Фон: то же изображение внутри sky -->
        <a-sky
          src="#seashell"
          radius="5"
          theta-length="90"
          position="0 0 -1"
        ></a-sky>
      </a-entity>

      <!-- Цель 7 с параллаксом -->
      <a-entity mindar-image-target="targetIndex: 7">
        <!-- Маска: изображение с альфа-каналом -->
        <a-image
          src="#swallow"
          width="1.5"
          height="2
          position="0 0 0.01"
          transparent="true"
        ></a-image>

        <!-- Фон: то же изображение внутри sky -->
        <a-sky
          src="#swallow"
          radius="5"
          theta-length="90"
          position="0 0 -1"
        ></a-sky>
      </a-entity>

      <!-- Цель 8 с параллаксом -->
      <a-entity mindar-image-target="targetIndex: 8">
        <!-- Маска: изображение с альфа-каналом -->
        <a-image
          src="#quartz2"
          width="1.5"
          height="2"
          position="0 0 0.01"
          transparent="true"
        ></a-image>

        <!-- Фон: то же изображение внутри sky -->
        <a-sky
          src="#quartz2"
          radius="5"
          theta-length="90"
          position="0 0 -1"
        ></a-sky>
      </a-entity>

      <!-- Цель 9 с параллаксом -->
      <a-entity mindar-image-target="targetIndex: 9">
        <!-- Маска: изображение с альфа-каналом -->
        <a-image
          src="#rose"
          width="1.5"
          height="2"
          position="0 0 0.01"
          transparent="true"
        ></a-image>

        <!-- Фон: то же изображение внутри sky -->
        <a-sky
          src="#rose"
          radius="5"
          theta-length="90"
          position="0 0 -1"
        ></a-sky>
      </a-entity>

    </a-scene>

    <script>
      const sceneEl = document.getElementById("scene");
      const playAudioButton = document.getElementById("playAudioButton");

      // Скрыть кнопку изначально
      playAudioButton.style.display = "none";
      text.style.display = "none";

      // Показать кнопку, когда Mindar готов
      sceneEl.addEventListener("arReady", () => {
        playAudioButton.style.display = "block";
        text.style.display = "block";
      });

      document.addEventListener("DOMContentLoaded", function () {
        const overlay = document.getElementById("overlay");
        const playAudioButton = document.getElementById("playAudioButton");

        playAudioButton.addEventListener("click", async function () {
          overlay.style.display = "none";
        });
      });
    </script>
  </body>
</html>